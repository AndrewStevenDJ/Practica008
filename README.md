# ğŸ´ PokÃ©Card Dex - Lista Infinita Profesional

![coverage][coverage_badge]
[![style: very good analysis][very_good_analysis_badge]][very_good_analysis_link]
[![License: MIT][license_badge]][license_link]

Una aplicaciÃ³n Flutter de nivel profesional que implementa una lista infinita de cartas PokÃ©mon TCG siguiendo principios de Arquitectura Limpia, patrÃ³n BLoC y mejores prÃ¡cticas de la industria.

Generated by the [Very Good CLI][very_good_cli_link] ğŸ¤–

![Flutter](https://img.shields.io/badge/Flutter-02569B?style=flat&logo=flutter&logoColor=white)
![Dart](https://img.shields.io/badge/Dart-0175C2?style=flat&logo=dart&logoColor=white)
![BLoC](https://img.shields.io/badge/BLoC-6C63FF?style=flat)

## âœ¨ CaracterÃ­sticas

- ğŸ“± **Infinite Scroll**: PaginaciÃ³n automÃ¡tica con throttling optimizado
- ğŸ—ï¸ **Arquitectura Limpia**: SeparaciÃ³n en capas Domain, Data y Presentation
- ğŸ¯ **BLoC Pattern**: GestiÃ³n de estado predecible y testeable
- ğŸ”„ **Estado Reactivo**: UI que responde automÃ¡ticamente a cambios de estado
- ğŸŒ **API Integration**: ConexiÃ³n robusta con PokÃ©mon TCG API usando Dio
- âœ… **100% Test Coverage**: Estructura preparada para testing profesional

## ğŸ“‚ Estructura del Proyecto

```
lib/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ view/
â”‚       â””â”€â”€ app.dart                    # ConfiguraciÃ³n principal de la app
â”œâ”€â”€ pokemon_cards/
â”‚   â”œâ”€â”€ bloc/
â”‚   â”‚   â”œâ”€â”€ pokemon_card_bloc.dart      # LÃ³gica de negocio
â”‚   â”‚   â”œâ”€â”€ pokemon_card_event.dart     # Eventos del BLoC
â”‚   â”‚   â””â”€â”€ pokemon_card_state.dart     # Estados del BLoC
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ pokemon_card_model.dart # Modelo JSON
â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚       â””â”€â”€ pokemon_card_repository_impl.dart # ImplementaciÃ³n
â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â””â”€â”€ pokemon_card.dart       # Entidad de dominio
â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚       â””â”€â”€ pokemon_card_repository.dart # Contrato
â”‚   â”œâ”€â”€ view/
â”‚   â”‚   â”œâ”€â”€ cards_page.dart             # PÃ¡gina con BlocProvider
â”‚   â”‚   â””â”€â”€ cards_view.dart             # Vista con UI
â”‚   â””â”€â”€ widgets/
â”‚       â”œâ”€â”€ bottom_loader.dart          # Indicador de carga
â”‚       â””â”€â”€ card_list_item.dart         # Item de la lista
```

## ğŸš€ Comenzando

### Prerequisitos

- Flutter SDK (3.0+)
- Dart SDK (3.0+)
- very_good_cli
- Node.js 18+ (opcional, para Gemini CLI)

---

## Getting Started ğŸš€

This project contains 3 flavors:

- development
- staging
- production

To run the desired flavor either use the launch configuration in VSCode/Android Studio or use the following commands:

```sh
# Development
$ flutter run --flavor development --target lib/main_development.dart

# Staging
$ flutter run --flavor staging --target lib/main_staging.dart

# Production
$ flutter run --flavor production --target lib/main_production.dart
```

_\*Pokecard Dex works on iOS, Android, Web, and Windows._

---

## Running Tests ğŸ§ª

To run all unit and widget tests use the following command:

```sh
$ very_good test --coverage --test-randomize-ordering-seed random
```

To view the generated coverage report you can use [lcov](https://github.com/linux-test-project/lcov).

```sh
# Generate Coverage Report
$ genhtml coverage/lcov.info -o coverage/

# Open Coverage Report
$ open coverage/index.html
```

---

## Working with Translations ğŸŒ

This project relies on [flutter_localizations][flutter_localizations_link] and follows the [official internationalization guide for Flutter][internationalization_link].

### Adding Strings

1. To add a new localizable string, open the `app_en.arb` file at `lib/l10n/arb/app_en.arb`.

```arb
{
    "@@locale": "en",
    "counterAppBarTitle": "Counter",
    "@counterAppBarTitle": {
        "description": "Text shown in the AppBar of the Counter Page"
    }
}
```

2. Then add a new key/value and description

```arb
{
    "@@locale": "en",
    "counterAppBarTitle": "Counter",
    "@counterAppBarTitle": {
        "description": "Text shown in the AppBar of the Counter Page"
    },
    "helloWorld": "Hello World",
    "@helloWorld": {
        "description": "Hello World Text"
    }
}
```

3. Use the new string

```dart
import 'package:pokecard_dex/l10n/l10n.dart';

@override
Widget build(BuildContext context) {
  final l10n = context.l10n;
  return Text(l10n.helloWorld);
}
```

### Adding Supported Locales

Update the `CFBundleLocalizations` array in the `Info.plist` at `ios/Runner/Info.plist` to include the new locale.

```xml
    ...

    <key>CFBundleLocalizations</key>
	<array>
		<string>en</string>
		<string>es</string>
	</array>

    ...
```

### Adding Translations

1. For each supported locale, add a new ARB file in `lib/l10n/arb`.

```
â”œâ”€â”€ l10n
â”‚   â”œâ”€â”€ arb
â”‚   â”‚   â”œâ”€â”€ app_en.arb
â”‚   â”‚   â””â”€â”€ app_es.arb
```

2. Add the translated strings to each `.arb` file:

`app_en.arb`

```arb
{
    "@@locale": "en",
    "counterAppBarTitle": "Counter",
    "@counterAppBarTitle": {
        "description": "Text shown in the AppBar of the Counter Page"
    }
}
```

`app_es.arb`

```arb
{
    "@@locale": "es",
    "counterAppBarTitle": "Contador",
    "@counterAppBarTitle": {
        "description": "Texto mostrado en la AppBar de la pÃ¡gina del contador"
    }
}
```

### Generating Translations

To use the latest translations changes, you will need to generate them:

1. Generate localizations for the current project:

```sh
flutter gen-l10n --arb-dir="lib/l10n/arb"
```

Alternatively, run `flutter run` and code generation will take place automatically.

---

## ğŸ¤– Fase 5: Flujo de Trabajo Profesional con Gemini CLI

### InstalaciÃ³n de Gemini CLI (Opcional)

Si deseas usar el asistente de IA para commits profesionales y refactorizaciÃ³n:

```bash
# Instalar Gemini CLI globalmente
npm install -g @google/gemini-cli

# Autenticarte con Google (60 solicitudes/min gratis)
gemini auth

# Instalar la extensiÃ³n de Flutter
gemini extensions install https://github.com/gemini-cli-extensions/flutter
```

### El Comando `/commit` - Tu Puerta de Calidad de IA

En lugar del flujo tradicional de Git, usa el asistente de IA que automatiza comprobaciones de calidad:

```bash
# 1. Ver archivos modificados
git status

# 2. Preparar cambios
git add .

# 3. Usar el asistente de calidad de IA
gemini
/commit
```

### Â¿QuÃ© hace `/commit`?

El comando ejecuta automÃ¡ticamente esta secuencia de calidad:

1. âœ… **Formateo**: `dart format` y `dart fix`
2. âœ… **AnÃ¡lisis EstÃ¡tico**: `flutter analyze` detecta errores potenciales
3. âœ… **Tests**: `flutter test` verifica que todo funciona
4. âœ… **Mensaje**: Genera un mensaje de commit descriptivo automÃ¡ticamente
5. âœ… **RevisiÃ³n**: Te permite editar el mensaje antes de confirmar

Este proceso transforma la IA en un socio de aseguramiento de calidad, no un atajo, sino una herramienta que refuerza hÃ¡bitos profesionales.

---

## ğŸ¯ Modo DesafÃ­o: Expande tu Conocimiento

### ğŸ† DesafÃ­o 1: Vista de Detalle

**Objetivo**: Implementar navegaciÃ³n a pantalla de detalles de carta.

**Pasos**:
1. Agregar `go_router` al proyecto
2. Definir ruta `/card/:id`
3. Crear `CardDetailPage` con nueva funcionalidad
4. Usar endpoint: `https://api.pokemontcg.io/v2/cards/<id>`
5. Mostrar informaciÃ³n completa (ataques, debilidades, resistencias)

**Habilidades**: NavegaciÃ³n, routing, nuevas llamadas API, patrÃ³n BLoC extendido

---

### ğŸ”„ DesafÃ­o 2: Pull-to-Refresh

**Objetivo**: Permitir refrescar la lista tirando hacia abajo.

**Pasos**:
1. Crear evento `CardsRefreshed` en el BLoC
2. Agregar handler en `PokemonCardBloc` que resetee `_currentPage = 1`
3. Envolver `ListView.builder` en `RefreshIndicator`
4. Conectar `onRefresh` disparando `CardsRefreshed()`

**Habilidades**: GestiÃ³n de estado, UX patterns, eventos del BLoC

---

### ğŸ§ª DesafÃ­o 3: Testing del BLoC

**Objetivo**: Escribir pruebas unitarias de nivel profesional.

**Pasos**:
1. Crear `test/pokemon_cards/bloc/pokemon_card_bloc_test.dart`
2. Usar `mocktail` para crear mock del repositorio
3. Usar `bloc_test` para verificar comportamiento del BLoC
4. Probar: initial â†’ success con datos
5. Probar: repository error â†’ failure

**CÃ³digo de ejemplo**:
```dart
import 'package:bloc_test/bloc_test.dart';
import 'package:mocktail/mocktail.dart';
import 'package:test/test.dart';

class MockPokemonCardRepository extends Mock 
    implements PokemonCardRepository {}

void main() {
  group('PokemonCardBloc', () {
    late MockPokemonCardRepository repository;
    
    setUp(() {
      repository = MockPokemonCardRepository();
    });
    
    blocTest<PokemonCardBloc, PokemonCardState>(
      'emits success cuando las cartas se obtienen correctamente',
      build: () {
        when(() => repository.getCards(page: any(named: 'page')))
            .thenAnswer((_) async => [mockCard]);
        return PokemonCardBloc(pokemonCardRepository: repository);
      },
      act: (bloc) => bloc.add(CardsFetched()),
      expect: () => [
        PokemonCardState(
          status: PokemonCardStatus.success,
          cards: [mockCard],
        ),
      ],
    );
  });
}
```

**Habilidades**: Unit testing, mocking, TDD, inversiÃ³n de dependencias

---

### ğŸ¨ DesafÃ­o 4: RefactorizaciÃ³n Guiada con IA

**Objetivo**: Mejorar `CardListItem` usando Gemini CLI.

**Usa este prompt**:
```bash
gemini
/modify Cambia el CardListItem para mostrar el HP y el tipo 
de la carta debajo de su nombre con mejor diseÃ±o visual.
```

**Observa el proceso**:
- Gemini genera `MODIFICATION_PLAN.md` con plan detallado
- Propone crear una rama Git para aislar el trabajo
- Revisa el plan **antes** de que se escriba cÃ³digo
- Aprende refactorizaciÃ³n estructurada y planificada

**Habilidades**: Refactoring, IA como asistente, planificaciÃ³n de cambios

---

### ğŸ” DesafÃ­o 5: BÃºsqueda por Nombre

**Objetivo**: Agregar barra de bÃºsqueda en el AppBar.

**ImplementaciÃ³n sugerida**:

1. **Nuevo Evento**:
```dart
final class CardsSearched extends PokemonCardEvent {
  const CardsSearched(this.query);
  final String query;
  
  @override
  List<Object> get props => [query];
}
```

2. **Actualizar Estado**:
```dart
final class PokemonCardState extends Equatable {
  const PokemonCardState({
    // ... campos existentes
    this.searchQuery = '',
  });
  
  final String searchQuery;
}
```

3. **Handler en BLoC**: Resetear pÃ¡gina y buscar
4. **UI**: `TextField` en `AppBar` que dispara evento
5. **API**: Usar query parameter `q=name:pikachu*`

**Habilidades**: API avanzada, nuevos eventos, formularios, debouncing

---

### ğŸ­ DesafÃ­o 6: Filtrado Avanzado por Tipo

**Objetivo**: Implementar filtro por tipo con Drawer.

**ImplementaciÃ³n sugerida**:

1. **Estado**: Agregar `Set<String> activeFilters` en `PokemonCardState`
2. **Evento**: `FilterChanged(Set<String> filters)`
3. **UI**: `Drawer` con `CheckboxListTile` para cada tipo PokÃ©mon
4. **API**: Query dinÃ¡mico `q=types:(fire OR water OR grass)`
5. **BLoC**: Limpiar lista y refetch con filtros aplicados

**Tipos sugeridos**: Fire, Water, Grass, Electric, Psychic, Fighting, Colorless

**Habilidades**: UI compleja, estado avanzado, queries dinÃ¡micos, Drawer

---

## ğŸ“ Arquitectura y Principios

Este proyecto demuestra:

- âœ… **Arquitectura Limpia** con separaciÃ³n clara de responsabilidades
- âœ… **SOLID Principles** aplicados (especialmente D - Dependency Inversion)
- âœ… **Testeable** por diseÃ±o (BLoC depende de abstracciones)
- âœ… **Escalable** con estructura feature-first
- âœ… **Mantenible** con cÃ³digo autodocumentado y separaciÃ³n de capas

### Flujo de Datos Completo

```
Usuario hace scroll
    â†“
ScrollController detecta posiciÃ³n
    â†“
Dispara evento CardsFetched
    â†“
PokemonCardBloc recibe evento
    â†“
Llama a PokemonCardRepository.getCards()
    â†“
PokemonCardRepositoryImpl hace peticiÃ³n HTTP con Dio
    â†“
API PokÃ©mon TCG responde con JSON
    â†“
PokemonCardModel.fromJson() parsea respuesta
    â†“
toEntity() convierte Model â†’ Entity
    â†“
BLoC emite nuevo PokemonCardState con cartas
    â†“
BlocBuilder escucha y reconstruye UI
    â†“
ListView.builder renderiza nuevas cartas
```

---

## ğŸ“š Recursos Adicionales

- [PokÃ©mon TCG API Documentation](https://docs.pokemontcg.io/)
- [BLoC Library Official Docs](https://bloclibrary.dev/)
- [Flutter Clean Architecture Guide](https://resocoder.com/flutter-clean-architecture-tdd/)
- [Very Good CLI Documentation](https://cli.vgv.dev/)
- [Gemini CLI GitHub](https://github.com/google/generative-ai-cli)
- [Flutter Testing Guide](https://docs.flutter.dev/testing)

---

## ğŸ¯ Checklist de Calidad Profesional

Antes de considerar el proyecto "completo":

- [ ] **Tests**: Cobertura mÃ­nima del 80% (idealmente 100%)
- [ ] **Icono**: Personalizado para la aplicaciÃ³n
- [ ] **Splash Screen**: DiseÃ±o coherente con la marca
- [ ] **DocumentaciÃ³n**: README completo (este archivo)
- [ ] **Git**: Historial limpio con commits descriptivos
- [ ] **CI/CD**: GitHub Actions funcionando correctamente
- [ ] **AnÃ¡lisis**: `flutter analyze` sin warnings crÃ­ticos
- [ ] **Performance**: Sin jank en scroll infinito
- [ ] **Accesibilidad**: Textos semÃ¡nticos y contraste adecuado

---

## ğŸ“ Nota Final

> **Importante**: Este proyecto es mÃ¡s que una app funcional. Es una demostraciÃ³n de ingenierÃ­a de software profesional. La arquitectura limpia, el patrÃ³n BLoC, y el flujo de trabajo con IA no son solo "features tÃ©cnicas", son las habilidades fundamentales que distinguen a un desarrollador junior de un ingeniero senior. Practica estos patrones, entiende el "por quÃ©" detrÃ¡s de cada decisiÃ³n arquitectÃ³nica, y estarÃ¡s preparado para proyectos de producciÃ³n reales.

---

## ğŸ‰ ConclusiÃ³n

Al completar este proyecto, has:

- âœ… Construido una app con arquitectura escalable
- âœ… Implementado gestiÃ³n de estado profesional con BLoC
- âœ… Aplicado principios SOLID y Clean Architecture
- âœ… Integrado APIs externas de forma robusta
- âœ… Aprendido flujo de trabajo asistido por IA
- âœ… Creado cÃ³digo testeable y mantenible

**Â¡Felicidades! Ahora tienes las bases para convertirte en un Flutter Engineer profesional.** ğŸš€

---

**Desarrollado con ğŸ’™ siguiendo principios de ingenierÃ­a de software de nivel senior**

---

[coverage_badge]: coverage_badge.svg
[flutter_localizations_link]: https://api.flutter.dev/flutter/flutter_localizations/flutter_localizations-library.html
[internationalization_link]: https://flutter.dev/docs/development/accessibility-and-localization/internationalization
[license_badge]: https://img.shields.io/badge/license-MIT-blue.svg
[license_link]: https://opensource.org/licenses/MIT
[very_good_analysis_badge]: https://img.shields.io/badge/style-very_good_analysis-B22C89.svg
[very_good_analysis_link]: https://pub.dev/packages/very_good_analysis
[very_good_cli_link]: https://github.com/VeryGoodOpenSource/very_good_cli
